

# 基于PID的四旋翼无人机轨迹跟踪控制

## 二维笔记说明

 ### 1. 展示二维平面四旋翼圆形轨迹跟踪（以其为例）
 ![基于PID的二维平面四旋翼圆形轨迹跟踪](/imgs/2025-04-29/2zgJqCdRNayZgQQu.png "基于PID的二维平面四旋翼圆形轨迹跟踪")

### 2.状态方程解读


### 3. 轨迹生成

1. 一般的轨迹都是以正弦波的形式来生成的，即为simulink里的**Sine Wave**模块生成，只需要**Sine Wave正弦波模块**、**Outpart输出模块**、**Mux模块**与**To Workspace模块**，较为简单。

如下图展示：

![轨迹生成 （1）](/imgs/2025-04-29/pFWBZW8TqOlMpRLl.png "轨迹生成 （1）")

2. 也可以通过**Fcn模块**自己写函数式来定义轨迹的形状，较为推荐此方式来进行轨迹的生成。

#### ​讲解： 
 
#### **核心模块解析**

#### ​**1. 正弦信号源模块**

-   ​**模块1**：`5*sin(u)`
    -   ​**功能**：生成振幅为5、频率与输入`u`相关的正弦波信号。
    -   ​**输出**：通过连线连接到输出端口`Y`（对应右侧的`y_fcn`信号线）。
-   ​**模块2**：`5*sin(0.5*u)`
    -   ​**功能**：生成振幅为5、频率为`0.5*u`的正弦波（频率是模块1的一半）。
    -   ​**输出**：通过连线连接到输出端口`Z`（对应右侧的`z_fcn`信号线）。

#### ​**2. 输出端口**

-   ​**Y和Z**：将两个正弦信号输出到工作空间或外部设备，便于后续分析（可用Scope模块观测波形）。

如下图展示：![轨迹生成 （2）](/imgs/2025-04-29/z0ECQc1znVrJvRlf.png "轨迹生成 （2）")

### 4. PID控制器与二维四旋翼动态系统

### **讲解**

### 1.讲解**二维四旋翼动态系统**

#### **1. 整体架构**

-   ​**模型名称**：`quadrotor2_circle/二维四旋翼动态系统`  
    专注于二维平面内四旋翼飞行器的动力学行为仿真
-   ​**核心模块**：
    -   ​`quadrotor2_system`：初始化定义飞行器物理特性（质量m、转动惯量J），将输入的推力`F`和力矩`M`通过动力学方程转换为状态变量`state` 
    -   ​`state`：存储和传递状态变量（位置环中的y坐标、z坐标、姿态环的phi角度），形成闭环反馈回路。
    -   ​**输入输出**：通过输入模块`力F`和`力矩M`驱动系统，输出飞行器的实时状态（如位置、姿态）。

#### ​**2. 关键参数与设计**

-   ​**信号流逻辑**：
  ```mermaid
graph TB
    A[输入力F/力矩M] -->|动力学方程计算| B(quadrotor2_system)
    B -->|输出状态变量state| C[反馈至PID控制器]
    C -.->|形成闭环| A
```

#### ​**3. 技术含义**

-   ​**状态反馈**：`state`模块为控制器提供实时位置和姿态数据，是闭环控制的基础。


![状态变量state](/imgs/2025-04-29/7dZkCcUQ3FJglUzR.png "状态变量state")

### 2.解析**PID控制器设计**

#### **1. 整体架构**

-   ​**模型名称**：`quadrotor2_circle/PID控制器`  
    实现高度（z/y方向）和横滚角（phi）的双闭环控制。
-   ​**核心模块**：
    -   ​**PID模块**：包含两组PID控制器，分别为处理高度误差（`z_d - z`）的位置环与横向位置误差（`y_d - y`）及角度（`phi`）共同组成的姿态环
    -   ​**限幅模块**：对输出推力`F`和力矩`M`进行约束（如电机最大推力）。
    -   ​**加减法模块**：计算期望值与实际状态的误差（`error`信号）。

#### ​**2. 关键参数与设计**

-   ​**控制逻辑**：
    1.  ​**输入**：期望高度`z_d`、期望横向位置`y_d`
    2.  ​**误差计算**：通过减法模块生成`error`信号。
    3.  ​**PID调节**：将误差信号转换为控制量（`F`和`M`），并通过限幅模块防止超调。
    4.  ​**输出**：控制量传递给动态系统模型驱动飞行器。
-   ​**抗饱和设计**：限幅模块避免控制器输出超出电机能力范围。

#### ​**3. 技术含义**

-   ​**双闭环控制**：
    -   ​**外环**：位置控制（如高度z/y）生成角度期望值。
    -   ​**内环**：姿态控制（如横滚角phi）快速响应角度变化进而调整位置。
-   ​**解耦设计**：独立PID控制器处理不同自由度，简化多变量系统控制。

![PID控制器](/imgs/2025-04-29/mieRgVuCIm2K7Tda.png "PID控制器")

### **3.协同工作原理**

1.  ​**信号闭环流程**：
    -   动态系统输出`state`（位置、角度） → PID控制器计算误差 → 生成`F`和`M` → 动态系统响应 → 更新`state`。
2.  ​**工程实现目标**：
    -   使四旋翼飞行器跟踪圆形轨迹（`quadrotor2_circle`可能指圆形路径跟踪）。
    -   通过PID参数整定（如比例系数、积分时间）优化动态响应（如超调量、稳态误差）。

<!--stackedit_data:
eyJoaXN0b3J5IjpbOTkwOTQ2MzA4LC0xMTM4Mjk1OTk1LDE0NT
A3NDY4MDIsMTE3NjcyNDUyNSwxNzI1NjQ3OTE0LC0xMDM3ODQ2
NTEyLDE1MTU1OTk5NzcsMTM1MDk0Mjc3OSw0OTIwMDE0NDcsLT
EyNTgyMTc0NDUsMzMxMTE4Nzg2LC0xNTYyNTM3NTk2LDEwMzUw
ODE1OTcsLTUyMjc2OTIxMCwtNjMxNzUyNzM1LDQ0MDkwNTYxOV
19
-->