[TOC]

# 基于PID的四旋翼无人机轨迹跟踪控制

## 三维笔记说明

### 一、展示三维平面四旋翼8字形轨迹跟踪（以其为例）

![基于PID的三维平面四旋翼8字形轨迹跟踪](/imgs/2025-05-04/XCa9LOXWW6ZH955l.png "基于PID的三维平面四旋翼8字形轨迹跟踪")

### 二、状态方程解读

### **状态方程体系**

### ​**1、系统状态变量**

$$
\mathbf{x} = \left\{
\begin{array}{ll}
    \text{位置:}       & x, y, z \\
    \text{线速度:}    & v_x, v_y, v_z \\
    \text{姿态角:}    & \phi, \theta, \psi \\
    \text{角速度:}    & \omega_\phi, \omega_\theta, \omega_\psi
\end{array}
\right\}, \quad
\mathbf{u} = \left\{
\begin{array}{ll}
    \text{力:}       & F_x, F_y, F_z \\
    \text{力矩:}     & M_\phi, M_\theta, M_\psi
\end{array}
\right\}
$$

-   ​**位置**: x,y,z
-   ​**线速度**: v~x~​,v~y~​,v~z~​
-   ​**姿态角（欧拉角）​**:  ψ（偏航角），ϕ（横滚角）, θ（俯仰角）
-   ​**角速度**: ω~ϕ~​ ω~θ~ ω~ψ​~
-   ​**控制输入**:
    -   F~x~​ F~y~​ F~z~​：x/y/z轴方向的控制力
    -   M~ϕ​~ M~θ~ ,M~ψ~​：绕各轴的力矩

----------

### ​**2、三维状态方程**

#### ​**1. 位置动力学**

$$
\begin{cases} 
\dot{x} = v_x \\ \\
\dot{y} = v_y \\ \\
\dot{z} = v_z 
\end{cases}
$$

#### **2. 线速度动力学**

由牛顿第二定律推导（含重力补偿）：

$$
\begin{cases} 
\dot{v}_x = \frac{F_x}{m} \\ \\
\dot{v}_y = \frac{F_y}{m} \\ \\
\dot{v}_z = \frac{F_z}{m} - g 
\end{cases}
$$

#### ​**3. 姿态角动力学**

姿态角变化率等于对应角速度：


$$
\begin{cases} 
\dot{ψ} = ω_ψ \\ \\
\dot{ϕ} = ω_ϕ \\ \\
\dot{θ} = ω_θ \\ 
\end{cases}
$$

#### ​**4. 角速度动力学**

由欧拉方程推导（转动惯量 J~x~​,J~y~​,J~z~​）：


$$
\begin{cases} 
\dot{ω}_ϕ = -\frac{M_ϕ}{J_x} \\ \\
\dot{ω}_θ = -\frac{M_θ}{J_y} \\ \\
\dot{ω}_ψ = -\frac{M_ψ}{J_z}
\end{cases}
$$


### 三、轨迹生成

### 1、输入输出路径

```markdown
常量输入u（时间变量） → 正弦函数模块 → 运算处理 → 四维输出[x_d,y_d,z_d,psi_d] → 轨迹合成(out_desire)
```
### 2、核心模块详解

#### 1. 时间基准模块

-   ​**输入源**：左侧的`(u)`代表时间变量，作为轨迹生成的基准参数
-   ​**参数设置**：默认时间变量u通过仿真时钟自动生成，对应Simulink仿真环境的时间轴

#### 2. 轨迹生成解析

-   ​**X轴轨迹(x_d)**：`4.5*sin(0.4*u)`
    -   振幅4.5米，角频率0.4 rad/s（周期约15.7秒）
    -   产生水平方向的正弦波动
-   ​**Y轴轨迹(y_d)**：`4.5*sin(0.2*u) + 2`
    -   振幅4.5米，角频率0.2 rad/s（周期约31.4秒）
    -   垂直偏移量+2米，形成非对称波形
-   ​**Z轴高度(z_d)**：`4.5*sin(0.4*u) + 3`
    -   与X轴同频率的正弦波动
    -   垂直基准高度3米
-   ​**偏航角(psi_d)**：`-5.5*u + 4`
    -   随时间线性变化的航向角（-5.5度/秒）
    -   初始角度4度

![三维轨迹生成](/imgs/2025-05-04/n5O7dN3UI0TOlHs7.png "三维轨迹生成")
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTEzOTQxMzE2MDQsMTczNTk2MzM0NiwxOD
M2NjQ3ODc3LC03OTg5OTQ5NzYsLTE4ODQ3NTM0MzcsLTUwMTM0
NDYxMCwyMDU1MTc2ODRdfQ==
-->