
[TOC]

# 基于PID的四旋翼无人机轨迹跟踪控制

## 三维笔记说明

### 一、展示三维平面四旋翼8字形轨迹跟踪（以其为例）

![基于PID的三维平面四旋翼8字形轨迹跟踪](/imgs/2025-05-04/XCa9LOXWW6ZH955l.png "基于PID的三维平面四旋翼8字形轨迹跟踪")

### 二、状态方程解读

### 状态方程体系

### ​1、系统状态变量

$$
\mathbf{x} = \left\{
\begin{array}{ll}
    \text{位置:}       & x, y, z \\
    \text{线速度:}    & v_x, v_y, v_z \\
    \text{姿态角:}    & \phi, \theta, \psi \\
    \text{角速度:}    & \omega_\phi, \omega_\theta, \omega_\psi
\end{array}
\right\}, \quad
\mathbf{u} = \left\{
\begin{array}{ll}
    \text{力:}       & F_x, F_y, F_z \\
    \text{力矩:}     & M_\phi, M_\theta, M_\psi
\end{array}
\right\}
$$

-   ​**位置**: x,y,z
-   ​**线速度**: v~x~​,v~y~​,v~z~​
-   ​**姿态角（欧拉角）​**:  ψ（偏航角），ϕ（横滚角）, θ（俯仰角）
-   ​**角速度**: ω~ϕ~​ ω~θ~ ω~ψ​~
-   ​**控制输入**:
    -   F~x~​ F~y~​ F~z~​：x/y/z轴方向的控制力
    -   M~ϕ​~ M~θ~ ,M~ψ~​：绕各轴的力矩

----------

### ​**2、三维状态方程**

#### ​**1. 位置动力学**

$$
\begin{cases} 
\dot{x} = v_x \\ \\
\dot{y} = v_y \\ \\
\dot{z} = v_z 
\end{cases}
$$

#### **2. 线速度动力学**

由牛顿第二定律推导（含重力补偿）：

$$
\begin{cases} 
\dot{v}_x = \frac{F_x}{m} \\ \\
\dot{v}_y = \frac{F_y}{m} \\ \\
\dot{v}_z = \frac{F_z}{m} - g 
\end{cases}
$$

#### ​**3. 姿态角动力学**

姿态角变化率等于对应角速度：


$$
\begin{cases} 
\dot{ψ} = ω_ψ \\ \\
\dot{ϕ} = ω_ϕ \\ \\
\dot{θ} = ω_θ \\ 
\end{cases}
$$

#### ​**4. 角速度动力学**

由转动定律推导（转动惯量 J~x~​ J~y~ J~z~​）：


$$
\begin{cases} 
\dot{ω}_ϕ = -\frac{M_ϕ}{J_x} \\ \\
\dot{ω}_θ = -\frac{M_θ}{J_y} \\ \\
\dot{ω}_ψ = -\frac{M_ψ}{J_z}
\end{cases}
$$


### 三、轨迹生成

### 1、输入输出路径

```markdown
常量输入u（时间变量） → 正弦函数模块 → 运算处理 → 四维输出[x_d,y_d,z_d,psi_d] → 轨迹合成(out_desire)
```
### 2、核心模块详解

#### 1. 时间基准模块

-   ​**输入源**：左侧的`Clock(u)`模块代表时间变量，作为轨迹生成的基准参数
-   ​**参数设置**：默认时间变量u通过仿真时钟自动生成，对应Simulink仿真环境的时间轴

#### 2. 轨迹生成解析

-   ​**X轴轨迹(x_d)**：`4.5*sin(0.4*u)`

    -   振幅4.5米，角频率0.4 rad/s（周期约15.7秒）
    -   生成水平横向周期性正弦波动运动

-   ​**Y轴轨迹(y_d)**：`4.5*sin(0.2*u)`

    -   振幅4.5米，角频率0.2 rad/s（周期约31.4秒）
    -   ​与X轴形成2:1频率比，相位差为0°，生成“8字形”轨迹

-   ​**Z轴高度(z_d)**：`4.5*sin(0.4*u)-5.5`

    -   在基准高度-5.5米的基础上叠加振幅4.5米的正弦波动（角频率0.4 rad/s，与X轴同步）
    -   模拟无人机在垂直方向的周期性起伏

-   ​**偏航角(psi_d)**：`0`

    -  设定偏航角（Yaw角）为固定值0°，即无人机始终朝向初始方向飞行，无航向调整

- **输出模块（out.desire）​**

	-   ​**功能**：将 `x_d`、`y_d`、`z_d`、`psi_d` 四个信号封装为复合输出信号。
	-   ​**接口形式**：通常为`To Workspace`，供之后飞控系统（PID控制器）同步读取四自由度期望值。

![三维轨迹生成](/imgs/2025-05-04/n5O7dN3UI0TOlHs7.png "三维轨迹生成")

> Written with [StackEdit中文版](https://stackedit.cn/).
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTE1NzQwMDI0MywxMzkzNjc4MDc0LC00MT
g3ODkwMDFdfQ==
-->